<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Minesweeper</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #222;
    color: #eee;
    display: flex;
    justify-content: center;
    margin-top: 40px;
  }
  .game {
    text-align: center;
  }
  .grid {
    display: grid;
    grid-template-columns: repeat(10, 32px);
    gap: 2px;
    margin-top: 10px;
  }
  .cell {
    width: 32px;
    height: 32px;
    background: #888;
    border: none;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
  }
  .cell.revealed {
    background: #ccc;
    cursor: default;
  }
  .cell.mine {
    background: #d9534f;
  }
</style>
</head>
<body>

<div class="game">
  <h1>Minesweeper</h1>
  <button type="button" onclick="startGame()">Restart</button>
  <div id="grid" class="grid"></div>
</div>

<script>
const ROWS = 10;
const COLS = 10;
const MINES = 15;

let board = [];
let revealed = [];
let gameOver = false;

function startGame() {
  gameOver = false;
  board = Array.from({ length: ROWS }, () => Array(COLS).fill(0));
  revealed = Array.from({ length: ROWS }, () => Array(COLS).fill(false));
  placeMines();
  calculateNumbers();
  render();
}

function placeMines() {
  let placed = 0;
  while (placed < MINES) {
    const r = Math.floor(Math.random() * ROWS);
    const c = Math.floor(Math.random() * COLS);
    if (board[r][c] !== "M") {
      board[r][c] = "M";
      placed++;
    }
  }
}

function calculateNumbers() {
  for (let r = 0; r < ROWS; r++) {
    for (let c = 0; c < COLS; c++) {
      if (board[r][c] === "M") continue;
      let count = 0;
      for (let dr = -1; dr <= 1; dr++) {
        for (let dc = -1; dc <= 1; dc++) {
          const nr = r + dr;
          const nc = c + dc;
          if (nr >= 0 && nr < ROWS && nc >= 0 && nc < COLS) {
            if (board[nr][nc] === "M") count++;
          }
        }
      }
      board[r][c] = count;
    }
  }
}

function render() {
  const grid = document.getElementById("grid");
  grid.innerHTML = "";
  for (let r = 0; r < ROWS; r++) {
    for (let c = 0; c < COLS; c++) {
      const btn = document.createElement("button");
      btn.className = "cell";
      if (revealed[r][c]) {
        btn.classList.add("revealed");
        if (board[r][c] === "M") {
          btn.textContent = "ðŸ’£";
          btn.classList.add("mine");
        } else if (board[r][c] > 0) {
          btn.textContent = board[r][c];
        }
      }
      btn.onclick = () => clickCell(r, c);
      grid.appendChild(btn);
    }
  }
}

function clickCell(r, c) {
  if (gameOver || revealed[r][c]) return;
  revealed[r][c] = true;

  if (board[r][c] === "M") {
    gameOver = true;
    revealAllMines();
    alert("Game Over!");
  } else if (board[r][c] === 0) {
    floodFill(r, c);
  }
  render();
}

function floodFill(r, c) {
  for (let dr = -1; dr <= 1; dr++) {
    for (let dc = -1; dc <= 1; dc++) {
      const nr = r + dr;
      const nc = c + dc;
      if (
        nr >= 0 && nr < ROWS &&
        nc >= 0 && nc < COLS &&
        !revealed[nr][nc]
      ) {
        revealed[nr][nc] = true;
        if (board[nr][nc] === 0) floodFill(nr, nc);
      }
    }
  }
}

function revealAllMines() {
  for (let r = 0; r < ROWS; r++) {
    for (let c = 0; c < COLS; c++) {
      if (board[r][c] === "M") revealed[r][c] = true;
    }
  }
}

startGame();
</script>

</body>
</html>

